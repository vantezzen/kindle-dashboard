services:
  dashboard:
    build: .
    # Explicitly target ARM64 for Raspberry Pi.
    # On Apple Silicon this builds natively; on Intel Mac use:
    #   docker buildx build --platform linux/arm64 -t kindle-dashboard .
    platform: linux/arm64
    restart: unless-stopped

    # Optionally expose the dashboard on localhost:3000 for testing without pushing to the Kindle.
    # ports:
    #   - "3000:3000"

    env_file:
      - .env.local

    environment:
      HOSTNAME: "0.0.0.0"

    # volumes:
    # Mount your SSH private key for passwordless login to the Kindle.
    # The key must already be in the Kindle's authorized_keys.
    # Generate a dedicated key with: ssh-keygen -t ed25519 -f ~/.ssh/kindle_key
    # - ~/.ssh/kindle_key:/root/.ssh/id_ed25519:ro
